(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{9854:function(e,s,a){Promise.resolve().then(a.bind(a,381)),Promise.resolve().then(a.bind(a,7808)),Promise.resolve().then(a.bind(a,7991))},7808:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f}});var l=a(9268),n=a(6006),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[a,l]=(0,n.useState)(s),[t,c]=(0,n.useState)(e);return{page:a,pageSize:t,setPage:e=>{l(e)},setPageSize:e=>{c(e)}}},c=a(972),i=a(8507),r=a(6008),d=a(1387),o=a(3658),u=a(4274),m=a(8399),h=a(8992),x=a(6564),p=a(5991),j=a(7261);function v(e){let{loading:s,page:a,data:n,total:t,setPage:c}=e,{push:i}=(0,r.useRouter)();return(0,l.jsxs)("div",{className:"py-4 mb-4",children:[(0,l.jsx)("h2",{className:"mb-2 text-2xl font-semibold",children:"Complains List"}),s&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,l.jsx)("span",{className:"sr-only",children:"Loading..."}),(0,l.jsx)("div",{className:"h-5 w-5 bg-black rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,l.jsx)("div",{className:"h-5 w-5 bg-black rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,l.jsx)("div",{className:"w-5 h-5 bg-black rounded-full animate-bounce"})]})}),(0,l.jsx)(m.Z,{component:p.Z,children:(0,l.jsxs)(d.Z,{sx:{minWidth:650},size:"small",children:[(0,l.jsx)(h.Z,{children:(0,l.jsxs)(x.Z,{className:"bg-gray-300",children:[(0,l.jsx)(u.Z,{children:"SN"}),(0,l.jsx)(u.Z,{children:"UID"}),(0,l.jsx)(u.Z,{children:"Customer"}),(0,l.jsx)(u.Z,{children:"Cus Mobile"}),(0,l.jsx)(u.Z,{children:"Brand"}),(0,l.jsx)(u.Z,{children:"Product"}),(0,l.jsx)(u.Z,{children:"Model"}),(0,l.jsx)(u.Z,{children:"Status"}),(0,l.jsx)(u.Z,{children:"Service Name"}),(0,l.jsx)(u.Z,{children:"Service Desc"}),(0,l.jsx)(u.Z,{children:"Defect"}),(0,l.jsx)(u.Z,{children:"Repair"}),(0,l.jsx)(u.Z,{children:"Symptom"}),(0,l.jsx)(u.Z,{children:"Date"})]})}),(0,l.jsx)(o.Z,{children:null==n?void 0:n.map((e,s)=>(0,l.jsxs)(x.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},className:"hover:bg-primary hover:bg-opacity-20 hover:cursor-pointer ".concat(s%2?"bg-gray-100":""),onClick:()=>i("/complains/".concat(null==e?void 0:e.id)),children:[(0,l.jsx)(u.Z,{component:"th",scope:"row",children:s+1}),(0,l.jsx)(u.Z,{children:e.call_uid}),(0,l.jsxs)(u.Z,{children:[e.cust_first_name," ",e.cust_last_name]}),(0,l.jsx)(u.Z,{children:e.cust_phone_mobile}),(0,l.jsx)(u.Z,{children:e.brand_name}),(0,l.jsx)(u.Z,{children:e.product_name}),(0,l.jsx)(u.Z,{children:e.model_number}),(0,l.jsx)(u.Z,{children:e.sc_name}),(0,l.jsx)(u.Z,{children:e.Call_status_val}),(0,l.jsx)(u.Z,{children:e.call_service_desc}),(0,l.jsx)(u.Z,{children:e.defect_code}),(0,l.jsx)(u.Z,{children:e.repair_code}),(0,l.jsx)(u.Z,{children:e.symptom_code}),(0,l.jsx)(u.Z,{children:e.call_dt})]},s))})]})}),(0,l.jsx)(j.Z,{rowsPerPageOptions:[10],component:"div",count:t,rowsPerPage:10,page:a,onPageChange:(e,s)=>c(s)})]})}function g(e){let{onSearch:s,onReset:a}=e,[t,i]=(0,n.useState)({}),[r,d]=(0,n.useState)([]),[o,u]=(0,n.useState)([]),m=async()=>{let{data:e}=await c.hi.get("/techsewa/masterconfig/publicmasterconfig/getSliderListpop");d(null==e?void 0:e.brands)},h=async e=>{let s=new FormData;s.append("product_id",e);let{data:a}=await c.hi.post("/techsewa/publicControl/GetProductcategiryByProduct",s);u(a)};(0,n.useEffect)(()=>{m()},[]);let x=e=>{let{name:s,value:a}=e.target,l={...t,[s]:a};"service_category"===s&&(delete l.product,delete l.product_category),"product"===s&&(delete l.product,u([]),h(a)),i(l)},p=async e=>{e.preventDefault();let a={};for(let e of Object.keys(t))t[e]&&(a[e]=t[e]);s(a)},j=new Set,v=r.filter(e=>!j.has(e.brand_name)&&(j.add(e.brand_name),!0)),g=[...r].filter(e=>+(null==e?void 0:e.brand_id)==+(null==t?void 0:t.service_category));return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"p-3 bg-gray-200 rounded-sm",children:(0,l.jsxs)("form",{onSubmit:p,children:[(0,l.jsxs)("div",{className:"space-x-2 space-y-2 md:space-x-3 md:grid md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"call_id",children:"Call ID"}),(0,l.jsx)("input",{className:"flex-grow px-1",type:"text",name:"call_id",id:"call_id",onChange:x})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"serviceCat",children:"Service Category"}),(0,l.jsx)("select",{name:"service_category",id:"serviceCat",className:"flex-grow bg-white border-gray-300",onChange:x,children:null==v?void 0:v.map((e,s)=>(0,l.jsx)("option",{value:null==e?void 0:e.brand_id,children:null==e?void 0:e.brand_name},s))})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"call_status",children:"Status"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"call_status",id:"call_status",onChange:x})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"customer_name",children:"Name"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"customer_name",id:"customer_name",onChange:x})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"product",children:"Product"}),(0,l.jsx)("select",{name:"product",id:"product",className:"flex-grow bg-white border-gray-300",onChange:x,children:null==g?void 0:g.map((e,s)=>(0,l.jsx)("option",{value:null==e?void 0:e.product_id,children:null==e?void 0:e.product_name},s))})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"reason",children:"Reason"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"reason",id:"reason",onChange:x})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"phone",children:"Phone"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"phone",id:"phone",onChange:x})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"product_category",children:"Product Category"}),(0,l.jsx)("select",{name:"product_category",id:"product_category",className:"flex-grow bg-white border-gray-300",onChange:x,children:null==o?void 0:o.map((e,s)=>(0,l.jsx)("option",{value:null==e?void 0:e.value,children:null==e?void 0:e.text},s))})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"from_date",children:"From Date"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"date",name:"from_date",id:"from_date",onChange:x})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("label",{className:"w-2/5",htmlFor:"to_date",children:"To Date"}),(0,l.jsx)("input",{className:"px-1 w-3/5",type:"date",name:"to_date",id:"to_date",onChange:x})]})]}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("button",{className:"px-4 py-2 font-medium text-white rounded shadow transition-all duration-150 ease-linear outline-none bg-primary hover:shadow-md focus:outline-none sm:mr-2",type:"submit",children:"Search"}),(0,l.jsx)("button",{className:"px-4 py-2 font-medium text-white bg-red-500 rounded shadow transition-all duration-150 ease-linear outline-none hover:shadow-md focus:outline-none sm:mr-2",type:"reset",onClick:()=>{i({}),u([]),a()},children:"Reset"})]})]})})})}function f(){let{push:e}=(0,r.useRouter)(),{user:s,isAuthenticated:a,isLoading:d}=(0,i.Z)(),[o,u]=(0,n.useState)(!0),{page:m,setPage:h}=t(),[x,p]=(0,n.useState)(0),[j,f]=(0,n.useState)([]),[b,_]=(0,n.useState)({});(0,n.useEffect)(()=>h(0),[]);let N=async()=>{u(!0);let e=new FormData;for(let a of(e.append("page","".concat(m+1)),(null==s?void 0:s.id)&&e.append("id",null==s?void 0:s.id),(null==s?void 0:s.type)&&e.append("type",null==s?void 0:s.type),Object.keys(b)))b[a]&&e.append(a,b[a]);let{data:a}=await c.hi.post("/techsewa/publiccontrol/getComplain",e);p(null==a?void 0:a.total),f(null==a?void 0:a.list),u(!1)};return(0,n.useEffect)(()=>{s&&N()},[s,m,b]),(0,n.useEffect)(()=>{d||a||e("/")},[a,d]),(0,l.jsxs)("div",{className:"container mx-auto",children:[(0,l.jsx)(g,{onSearch:_,onReset:()=>_({})}),(0,l.jsx)(v,{loading:o,data:j,page:m,setPage:h,total:x})]})}},972:function(e,s,a){"use strict";a.d(s,{hi:function(){return t},zk:function(){return c}});var l=a(7051),n=a(4214);let t=n.Z.create({baseURL:l.F});async function c(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={...s},n=await fetch("".concat(l.F).concat(e),a);return n.json()}}},function(e){e.O(0,[2775,5625,6680,3296,8166,1524,7269,8121,372,7441,5383,1734,381,7991,9253,5769,1744],function(){return e(e.s=9854)}),_N_E=e.O()}]);