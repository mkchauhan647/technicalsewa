(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{5877:function(e,s,t){Promise.resolve().then(t.bind(t,381)),Promise.resolve().then(t.bind(t,7991)),Promise.resolve().then(t.bind(t,7808))},7808:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(9268),n=t(6006),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[t,a]=(0,n.useState)(s),[l,i]=(0,n.useState)(e);return{page:t,pageSize:l,setPage:e=>{a(e)},setPageSize:e=>{i(e)}}},i=t(972),c=t(8507),d=t(6008),r=t(1387),o=t(3658),u=t(4274),h=t(8399),m=t(8992),x=t(6564),p=t(5991),j=t(7261);function f(e){let{loading:s,page:t,data:n,total:l,setPage:i}=e,{push:c}=(0,d.useRouter)();return(0,a.jsxs)("div",{className:"py-4 mb-4",children:[(0,a.jsx)("h2",{className:"mb-2 text-2xl font-semibold",children:"Complains List"}),s&&(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,a.jsx)("span",{className:"sr-only",children:"Loading..."}),(0,a.jsx)("div",{className:"h-5 w-5 bg-black rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,a.jsx)("div",{className:"h-5 w-5 bg-black rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,a.jsx)("div",{className:"w-5 h-5 bg-black rounded-full animate-bounce"})]})}),(0,a.jsx)(h.Z,{component:p.Z,children:(0,a.jsxs)(r.Z,{sx:{minWidth:650},size:"small",children:[(0,a.jsx)(m.Z,{children:(0,a.jsxs)(x.Z,{className:"bg-gray-300",children:[(0,a.jsx)(u.Z,{children:"SN"}),(0,a.jsx)(u.Z,{children:"UID"}),(0,a.jsx)(u.Z,{children:"Customer"}),(0,a.jsx)(u.Z,{children:"Cus Mobile"}),(0,a.jsx)(u.Z,{children:"Brand"}),(0,a.jsx)(u.Z,{children:"Product"}),(0,a.jsx)(u.Z,{children:"Model"}),(0,a.jsx)(u.Z,{children:"Status"}),(0,a.jsx)(u.Z,{children:"Service Name"}),(0,a.jsx)(u.Z,{children:"Service Desc"}),(0,a.jsx)(u.Z,{children:"Defect"}),(0,a.jsx)(u.Z,{children:"Repair"}),(0,a.jsx)(u.Z,{children:"Symptom"}),(0,a.jsx)(u.Z,{children:"Date"})]})}),(0,a.jsx)(o.Z,{children:null==n?void 0:n.map((e,s)=>(0,a.jsxs)(x.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},className:"hover:bg-primary hover:bg-opacity-20 hover:cursor-pointer ".concat(s%2?"bg-gray-100":""),onClick:()=>c("/complains/".concat(null==e?void 0:e.id)),children:[(0,a.jsx)(u.Z,{component:"th",scope:"row",children:s+1}),(0,a.jsx)(u.Z,{children:e.call_uid}),(0,a.jsxs)(u.Z,{children:[e.cust_first_name," ",e.cust_last_name]}),(0,a.jsx)(u.Z,{children:e.cust_phone_mobile}),(0,a.jsx)(u.Z,{children:e.brand_name}),(0,a.jsx)(u.Z,{children:e.product_name}),(0,a.jsx)(u.Z,{children:e.model_number}),(0,a.jsx)(u.Z,{children:e.sc_name}),(0,a.jsx)(u.Z,{children:e.Call_status_val}),(0,a.jsx)(u.Z,{children:e.call_service_desc}),(0,a.jsx)(u.Z,{children:e.defect_code}),(0,a.jsx)(u.Z,{children:e.repair_code}),(0,a.jsx)(u.Z,{children:e.symptom_code}),(0,a.jsx)(u.Z,{children:e.call_dt})]},s))})]})}),(0,a.jsx)(j.Z,{rowsPerPageOptions:[10],component:"div",count:l,rowsPerPage:10,page:t,onPageChange:(e,s)=>i(s)})]})}function b(e){let{onSearch:s,onReset:t}=e,[l,c]=(0,n.useState)({}),[d,r]=(0,n.useState)([]),[o,u]=(0,n.useState)([]),h=async()=>{let{data:e}=await i.hi.get("/techsewa/masterconfig/publicmasterconfig/getSliderListpop");r(null==e?void 0:e.brands)},m=async e=>{let s=new FormData;s.append("product_id",e);let{data:t}=await i.hi.post("/techsewa/publicControl/GetProductcategiryByProduct",s);u(t)};(0,n.useEffect)(()=>{h()},[]);let x=e=>{let{name:s,value:t}=e.target,a={...l,[s]:t};"service_category"===s&&(delete a.product,delete a.product_category),"product"===s&&(delete a.product,u([]),m(t)),c(a)},p=async e=>{e.preventDefault();let t={};for(let e of Object.keys(l))l[e]&&(t[e]=l[e]);s(t)},j=new Set;return d.filter(e=>!j.has(e.brand_name)&&(j.add(e.brand_name),!0)),[...d].filter(e=>+(null==e?void 0:e.brand_id)==+(null==l?void 0:l.service_category)),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"p-3 bg-gray-200 rounded-sm",children:(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsxs)("div",{className:"space-x-2 space-y-2 md:space-x-3 md:grid md:grid-cols-5",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("label",{className:"w-1/3",htmlFor:"call_id",children:"Call ID"}),(0,a.jsx)("input",{className:"flex-grow px-1",type:"text",name:"call_id",id:"call_id",onChange:x})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("label",{className:"w-1/3",htmlFor:"customer_name",children:"Name"}),(0,a.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"customer_name",id:"customer_name",onChange:x})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("label",{className:"w-1/3",htmlFor:"phone",children:"Phone"}),(0,a.jsx)("input",{className:"px-1 w-3/5",type:"text",name:"phone",id:"phone",onChange:x})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("label",{className:"w-1/3",htmlFor:"from_date",children:"From Date"}),(0,a.jsx)("input",{className:"px-1 w-3/5",type:"date",name:"from_date",id:"from_date",onChange:x})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("label",{className:"w-1/3",htmlFor:"to_date",children:"To Date"}),(0,a.jsx)("input",{className:"px-1 w-3/5",type:"date",name:"to_date",id:"to_date",onChange:x})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 font-medium text-white rounded shadow transition-all duration-150 ease-linear outline-none bg-primary hover:shadow-md focus:outline-none sm:mr-2",type:"submit",children:"Search"}),(0,a.jsx)("button",{className:"px-4 py-2 font-medium text-white bg-red-500 rounded shadow transition-all duration-150 ease-linear outline-none hover:shadow-md focus:outline-none sm:mr-2",type:"reset",onClick:()=>{c({}),u([]),t()},children:"Reset"})]})]})})})}function v(){let{push:e}=(0,d.useRouter)(),{user:s,isAuthenticated:t,isLoading:r}=(0,c.Z)(),[o,u]=(0,n.useState)(!0),{page:h,setPage:m}=l(),[x,p]=(0,n.useState)(0),[j,v]=(0,n.useState)([]),[g,_]=(0,n.useState)({});(0,n.useEffect)(()=>m(0),[]);let y=async()=>{u(!0);let e=new FormData;for(let t of(e.append("page","".concat(h+1)),(null==s?void 0:s.id)&&e.append("id",null==s?void 0:s.id),(null==s?void 0:s.type)&&e.append("type",null==s?void 0:s.type),Object.keys(g)))g[t]&&e.append(t,g[t]);let{data:t}=await i.hi.post("/techsewa/publiccontrol/getComplain",e);p(null==t?void 0:t.total),v(null==t?void 0:t.list),u(!1)};return(0,n.useEffect)(()=>{s&&y()},[s,h,g]),(0,n.useEffect)(()=>{r||t||e("/")},[t,r]),(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)(b,{onSearch:_,onReset:()=>_({})}),(0,a.jsx)(f,{loading:o,data:j,page:h,setPage:m,total:x})]})}},972:function(e,s,t){"use strict";t.d(s,{hi:function(){return l},zk:function(){return i}});var a=t(7051),n=t(4214);let l=n.Z.create({baseURL:a.F});async function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={...s},n=await fetch("".concat(a.F).concat(e),t);return n.json()}}},function(e){e.O(0,[2775,5625,6680,3296,8166,1524,7269,8121,372,7441,5383,1734,381,7991,9253,5769,1744],function(){return e(e.s=5877)}),_N_E=e.O()}]);